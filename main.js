(()=>{"use strict";var e=document.querySelector("#popup-edit"),t=document.querySelector("#popup-new-cards"),n=document.querySelector("#popup-img"),o=document.querySelector("#popup-ava"),r=document.querySelector("#profile-edit-button"),c=document.querySelector("#popup-form-cards-button"),u=document.querySelector("#profile-edit-ava-button"),i=(e.querySelector("#popup-close-edit"),t.querySelector("#popup-close-cards"),n.querySelector("#popup-close-img"),o.querySelector("#popup-close-ava"),e.querySelector("#profile-edit")),s=e.querySelector("#name-input-profile"),l=e.querySelector("#job-input-profile"),a=document.querySelector("#profile-name"),p=document.querySelector("#profile-hobby"),d=t.querySelector("#popup-form-cards"),m=t.querySelector("#name-input-cards"),v=t.querySelector("#link-input-cards"),y=o.querySelector("#profile-edit-ava"),f={inputSelector:".popup__item",submitButtonSelector:".popup__submit",inputErrorClass:"popup__item_type_error",errorActiveClass:"popup__item-error_active",buttonInactive:"button_inactive"};function _(e){e.classList.add("popup_opened"),document.addEventListener("keydown",q),document.addEventListener("mousedown",b),document.addEventListener("click",k)}function S(e){e.classList.remove("popup_opened"),L()}function q(e){"Escape"===e.key&&S(document.querySelector(".popup_opened"))}function b(e){e.target.classList.contains("popup_opened")&&(e.target.classList.toggle("popup_opened"),L())}function k(e){e.target.classList.contains("popup__close")&&S(document.querySelector(".popup_opened"))}function L(){document.removeEventListener("keydown",q),document.removeEventListener("mousedown",b),document.removeEventListener("click",k)}var g=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n.buttonInactive),t.removeAttribute("disabled")):(t.classList.add(n.buttonInactive),t.setAttribute("disabled","disabled"))},E=function(e,t){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);g(n,o,t),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){t.validity.valid?function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorActiveClass),o.textContent=""}(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),r.classList.add(o.errorActiveClass),r.textContent=n}(e,t,t.validationMessage,n)}(e,r,t),g(n,o,t)}))}))}(e,t)},x=document.querySelector("#card-container").content,C=document.querySelector("#elements-list");function h(e){e.target.classList.toggle("elements__like_active")}function A(){C.querySelector(".button__delete").closest(".elements__element").remove()}function j(e,t){C.prepend(function(e,t){var o=x.querySelector(".elements__element").cloneNode(!0);return o.querySelector(".elements__image").src=t,o.querySelector(".elements__image").alt=e,o.querySelector(".elements__title").textContent=e,o.querySelector(".button__delete").addEventListener("click",A),o.querySelector(".elements__like").addEventListener("click",h),o.querySelector(".elements__image").addEventListener("click",(function(){!function(e,t){var o=n.querySelector("#popup-img-title"),r=n.querySelector("#popup-image-link");o.textContent=e,r.src=t,r.alt=e,_(n)}(e,t)})),o}(e,t))}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){j(e.name,e.link)})),E(e,f),E(t,f),E(o,f),r.addEventListener("click",(function(t){s.value=a.textContent,l.value=p.textContent,_(e)})),c.addEventListener("click",(function(e){var n;d.reset(),_(t),(n=t.querySelector(".popup__button")).classList.add("button_inactive"),n.setAttribute("disabled","disabled")})),u.addEventListener("click",(function(e){y.reset(),_(o)})),i.addEventListener("submit",(function(t){t.preventDefault(),a.textContent=s.value,p.textContent=l.value,S(e)})),d.addEventListener("submit",(function(e){e.preventDefault(),j(m.value,v.value),S(t)}))})();